function p(a){var c=0;return function(){return c<a.length?{done:!1,value:a[c++]}:{done:!0}}}function q(a){var c="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return c?c.call(a):{next:p(a)}}function u(a){if(!(a instanceof Array)){a=q(a);for(var c,d=[];!(c=a.next()).done;)d.push(c.value);a=d}return a}function v(a){this.position=a}var w=function(){var a={};Array.from('"\\/bfnrtu').forEach(function(c){return a[c]=!0});return a}(),x=/[0-9a-fA-F]/;
function y(a,c){function d(b){return a.substring(g,g+b.length)===b}function e(b){if(!d(b))throw new v(g);g+=b.length}function f(){var b=/[^\s]/g;b.lastIndex=g;g=(b=b.exec(a))?b.index:a.length}function k(){return a.charAt(g)}function h(){++g;return k()}var g=c||0;"number"!==typeof g&&(g=0);var m={s:function(){e('"');for(var b=!1;'"'!==a.charAt(g)||b;)if(b){if("u"===k())for(++g,b=0;4>b;++b){if(!x.test(k()))throw new v(g);++g}else if(w[k()])++g;else throw new v(g);b=!1}else b="\\"===k()?!0:!1,++g;e('"')},
n:function(){var b=k();for("-"===b&&(b=h());"0"<=b&&"9">=b;)b=h();if("."===b)for(b=h();"0"<=b&&"9">=b;)b=h();if("e"===b||"E"===b){b=h();if("+"===b||"-"===b)b=h();for(;"0"<=b&&"9">=b;)b=h()}},k:function(){[!0,!1,null].map(String).find(function(b){return d(b)?(e(b),!0):!1})},o:function(){e("{");for(f();!d("}");){m.s();f();e(":");m._();f();if(d("}"))break;e(",");f()}++g},a:function(){e("[");for(f();!d("]");){m._();f();if(d("]"))break;e(",");f()}++g},_:function(){f();var b=k(),n={tfn:"k","{":"o","[":"a",
"-0123456789":"n",'"':"s"},l;for(l in n)if(1<l.length)for(var r=q(l),t=r.next();!t.done;t=r.next())n[t.value]=n[l];if((b=n[b])&&m[b])m[b].call(m);else throw new v(g);}};m._();return g}function z(a){return new Promise(function(c,d){var e=new FileReader;e.onload=function(){c(e.result)};e.onerror=function(){d("error loading file")};e.readAsText(a,"UTF-8")})}function A(a,c){c=c||0;for(var d=[],e=0;e<a.length;){var f=40-c;c=0;d.push(a.substring(e,e+f));e+=f}return d}
function B(a,c){var d=document.createElement("span");c&&(d.className=c);d.textContent=a;return d}function C(a,c,d){var e=document.createElement("span");e.className=c;a=q(Array.from(a));for(c=a.next();!c.done;c=a.next())c=c.value," "<=c?(c=B(c,null),d.push(c),e.appendChild(c)):e.appendChild(document.createTextNode(c));e.normalize();return e}function D(a){return" ">a?String.fromCharCode(9216+a.charCodeAt(0)):a}
function E(a,c){var d=null,e=/\s+/g;console.log("File size in characters: "+a.length);var f=0,k=document.querySelector(".error.hidden");k.parentNode.appendChild(k.cloneNode(!0));k.classList.remove("hidden");try{for(;null===d||d<a.length;){e.lastIndex=d;var h=e.exec(a);h.index===d&&(d+=h[0].length);if(d>=a.length)break;d=y(a,d);++f}console.log("Number of records: "+f);k.textContent=c?c+" is correct":"Correct";k.classList.add("correct")}catch(n){if(n instanceof v){console.log("Number of records before the error: "+
f);k.classList.remove("correct");f=e=0;d=[];for(h=0;h<n.position;++h)"\n"===a.charAt(h)?(++e,f=0):++f;h="Error";c&&(h+=" in "+c);k.textContent=h+" at position "+n.position+" row "+(e+1)+" column "+(f+1);e=document.createElement("pre");f=n.position-260;0>f&&(f=0);h=f+520;h>a.length&&(h=a.length);var g=a.substring(f,h);h=A(g.substring(0,n.position-f),0);f=A(g.substring(n.position-f),(h[h.length-1]||"").length);e.appendChild(C(h.map(function(l){return Array.from(l).map(D).join("")}).join("\n"),"before",
d));e.appendChild(B("","marker"));e.appendChild(C(f.map(function(l){return Array.from(l).map(D).join("")}).join("\n"),"after",d));f=document.createElement("div");f.classList.add("outer");f.appendChild(e);k.appendChild(f);var m=Math.max.apply(Math,u(d.map(function(l){return l.offsetWidth})));if(8<m){var b=m+"px";d.forEach(function(l){l.style.fontStretch=100*m/l.offsetWidth+"%";l.style.width=b})}}else throw n;}}
function F(a){z(a).then(function(c){return E(c,a.name)})["catch"](function(c){console.error(c)})}
(function(a,c){function d(b,n){var l=!1;Array.prototype.slice.call(b.files).forEach(function(r){l=!0;c(r,n)});return l}function e(b){b.stopPropagation();b.preventDefault();b.dataTransfer.dropEffect="copy";b.currentTarget.classList.add("dragOver")}function f(b){b.stopPropagation();b.preventDefault();d(b.dataTransfer,b);b.currentTarget.classList.remove("dragOver")}function k(b){b.currentTarget.classList.add("dragOver")}function h(b){b.currentTarget.classList.remove("dragOver")}var g={},m=!1;g.bind=
function(){m=!0;a.addEventListener("dragover",e,!1);a.addEventListener("drop",f,!1);a.addEventListener("dragenter",k,!1);a.addEventListener("dragleave",h,!1)};g.b=function(){m&&(a.removeEventListener("dragover",e,!1),a.removeEventListener("drop",f,!1),a.removeEventListener("dragenter",k,!1),a.removeEventListener("dragleave",h,!1),m=!1)};g.bind();return g})(document.body,F);
document.addEventListener("paste",function(a){a=Array.from(a.clipboardData.items);a=q(a);for(var c=a.next();!c.done;c=a.next())c=c.value,"file"===c.kind&&(c.name&&console.log("Found a file: ",c.name),F(c.getAsFile())),"string"===c.kind&&"text/plain"===c.type?c.getAsString(function(d){return E(d,"<pasted text>")}):console.log("Don't know what to do with this:",c.kind,c.type)});document.querySelector("input[type=file]").addEventListener("change",function(a){return Array.from(a.target.files).forEach(F)});
